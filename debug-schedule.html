<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Schedule - SixersHoops</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
        }
        .debug-log {
            background: #2a2a2a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid #444;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .schedule-container {
            background: #2a2a2a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .loading {
            text-align: center;
            padding: 2rem;
            color: #f59e0b;
        }
        .game-card {
            background: #1a1a1a;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border: 1px solid #555;
        }
    </style>
</head>
<body>
    <h1>🏀 Debug Schedule Page</h1>
    
    <div class="debug-log" id="debugLog">
        <div>Debug log will appear here...</div>
    </div>
    
    <div class="schedule-container" id="schedule-container">
        <div class="loading">
            <div>Loading schedule...</div>
        </div>
    </div>

    <script>
        // Debug logging function
        function debugLog(message) {
            console.log(message);
            const logDiv = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        // Simple fallback data
        const fallbackScheduleData = [
            { date: "2024-12-15", opponent: "Boston Celtics", location: "away", time: "7:30 PM ET", venue: "TD Garden", tv: "ESPN", status: "completed", result: "W 118-114" },
            { date: "2024-12-17", opponent: "Charlotte Hornets", location: "home", time: "7:00 PM ET", venue: "Wells Fargo Center", tv: "NBCSP", status: "completed", result: "W 121-108" },
            { date: "2024-12-19", opponent: "Washington Wizards", location: "away", time: "7:00 PM ET", venue: "Capital One Arena", tv: "NBCSP", status: "completed", result: "W 109-103" },
            { date: "2024-12-21", opponent: "San Antonio Spurs", location: "home", time: "7:00 PM ET", venue: "Wells Fargo Center", tv: "NBCSP", status: "upcoming" },
            { date: "2024-12-23", opponent: "Boston Celtics", location: "home", time: "5:00 PM ET", venue: "Wells Fargo Center", tv: "ABC", status: "upcoming" },
            { date: "2024-12-25", opponent: "Miami Heat", location: "away", time: "2:30 PM ET", venue: "Kaseya Center", tv: "ESPN", status: "upcoming" }
        ];

        debugLog('🚀 Starting debug script...');
        debugLog('📊 Fallback data loaded: ' + fallbackScheduleData.length + ' games');

        // Global variables
        let scheduleData = fallbackScheduleData;
        debugLog('✅ scheduleData initialized with ' + scheduleData.length + ' games');

        // Simple render function
        function renderSchedule() {
            debugLog('📅 Starting renderSchedule()...');
            const container = document.getElementById('schedule-container');
            
            if (!container) {
                debugLog('❌ Container not found!');
                return;
            }

            debugLog('📊 Rendering ' + scheduleData.length + ' games');
            
            // Clear loading
            container.innerHTML = '';

            // Group games by month
            const gamesByMonth = {};
            scheduleData.forEach(game => {
                const date = new Date(game.date);
                const monthYear = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
                
                if (!gamesByMonth[monthYear]) {
                    gamesByMonth[monthYear] = [];
                }
                gamesByMonth[monthYear].push(game);
            });

            debugLog('📅 Games grouped into ' + Object.keys(gamesByMonth).length + ' months');

            // Render each month
            Object.keys(gamesByMonth).forEach(monthYear => {
                const monthDiv = document.createElement('div');
                monthDiv.innerHTML = `<h3>${monthYear}</h3>`;
                
                gamesByMonth[monthYear].forEach(game => {
                    const gameDiv = document.createElement('div');
                    gameDiv.className = 'game-card';
                    gameDiv.innerHTML = `
                        <strong>${game.date}</strong> - ${game.opponent} (${game.location})
                        <br>Status: ${game.status} ${game.result || ''}
                    `;
                    monthDiv.appendChild(gameDiv);
                });
                
                container.appendChild(monthDiv);
            });

            debugLog('✅ Schedule rendered successfully!');
        }

        // Simple stats function
        function updateStats() {
            debugLog('📊 Updating stats...');
            // Just log for now
            const completed = scheduleData.filter(g => g.status === 'completed').length;
            const upcoming = scheduleData.filter(g => g.status === 'upcoming').length;
            debugLog('📈 Stats: ' + completed + ' completed, ' + upcoming + ' upcoming');
        }

        // Mock functions for other features
        function setupFilters() { debugLog('🔧 setupFilters() called'); }
        function setupMobileMenu() { debugLog('📱 setupMobileMenu() called'); }
        function setupScrollEffects() { debugLog('✨ setupScrollEffects() called'); }
        function startCountdownTimers() { debugLog('⏰ startCountdownTimers() called'); }

        // Main initialization
        function initializeSchedule() {
            debugLog('🚀 initializeSchedule() started');
            
            try {
                debugLog('📊 Calling updateStats()...');
                updateStats();
                
                debugLog('📅 Calling renderSchedule()...');
                renderSchedule();
                
                debugLog('🔧 Calling setupFilters()...');
                setupFilters();
                
                debugLog('📱 Calling setupMobileMenu()...');
                setupMobileMenu();
                
                debugLog('✨ Calling setupScrollEffects()...');
                setupScrollEffects();
                
                debugLog('⏰ Calling startCountdownTimers()...');
                startCountdownTimers();
                
                debugLog('✅ initializeSchedule() completed successfully!');
                
            } catch (error) {
                debugLog('❌ Error in initializeSchedule(): ' + error.message);
                debugLog('📋 Error stack: ' + error.stack);
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            debugLog('🌐 DOM loaded, starting initialization...');
            try {
                initializeSchedule();
            } catch (error) {
                debugLog('❌ Critical error: ' + error.message);
                debugLog('📋 Error stack: ' + error.stack);
            }
        });

        // Emergency timeout
        setTimeout(function() {
            const container = document.getElementById('schedule-container');
            if (container && container.innerHTML.includes('Loading')) {
                debugLog('⚠️ Emergency timeout reached - forcing display');
                try {
                    renderSchedule();
                } catch (error) {
                    debugLog('❌ Emergency render failed: ' + error.message);
                }
            }
        }, 3000);

        debugLog('📝 Debug script loaded successfully');
    </script>
</body>
</html>

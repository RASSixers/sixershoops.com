<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Sixers Depth Chart | SixersHoops</title>
  <link rel="icon" href="/favicon.ico"/>
  <link rel="apple-touch-icon" href="/favicon.ico"/>

  <link rel="stylesheet" href="styles.css"/>
  <link rel="stylesheet" href="navbar-styles.css"/>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-T1V9Q0MNEM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G1V9Q0MNEM');
  </script>

  <style>
    /* Reset */
    *, *::before, *::after{margin:0;padding:0;box-sizing:border-box;}

    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color:#e2e8f0;
      padding-top:80px;
      min-height:100vh;
    }

    /* Content wrapper */
    .content-wrapper{
      max-width:1400px;
      margin:0 auto;
      padding:0 20px;
    }

    /* ---------------- Banner (Depth‑on) ---------------- */
    .depth-hero{
      position:relative;
      padding:4rem 0 2rem;
      text-align:center;
      color:#fff;
      background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #3b82f6 100%);
      border-radius:16px;
      margin-top:2rem;
      overflow:hidden;
      perspective:1000px;
      box-shadow:0 20px 40px rgba(0,0,0,.4), 0 0 0 1px rgba(59, 130, 246, 0.2);
      border-top: 3px solid #3b82f6;
    }
    .depth-hero::before{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
      opacity:.6;
      z-index:0;
      border-radius:16px;
    }
    .depth-hero-content{
      position:relative; z-index:1;
      display:flex; flex-direction:column; align-items:center;
    }
    .depth-logo{
      width:200px; height:200px; object-fit:cover;
      margin-bottom:1.5rem;
      background:#fff; border-radius:20px; border:3px solid #3b82f6;
      box-shadow:0 8px 30px rgba(59, 130, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
    }
    .depth-logo:hover{
      transform: translateY(-4px) scale(1.02);
      box-shadow:0 12px 40px rgba(59, 130, 246, 0.6);
    }
    .depth-title{
      font-size:2.8rem;font-weight:900;font-family:Georgia,serif;
      letter-spacing:-0.8px;margin-bottom:.5rem;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .depth-subtitle{
      font-size:1.2rem;font-weight:600;opacity:.9;margin-bottom:1.5rem;
      color:#94a3b8;text-transform:uppercase;letter-spacing:1.5px;
    }

    /* -------------- Main content -------------- */
    .depth-main-content{
      max-width:900px;
      margin:2rem auto 0;
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-radius:20px;
      box-shadow:0 20px 40px rgba(0,0,0,.4), 0 0 0 1px rgba(59, 130, 246, 0.2);
      padding:2.5rem;
      border-top: 2px solid #3b82f6;
    }

    /* -------------- Controls -------------- */
    .depth-controls{display:flex;justify-content:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;}
    .control-btn{
      background: rgba(255, 255, 255, 0.05);
      border:1px solid rgba(255, 255, 255, 0.1);
      color:#e2e8f0;
      padding:.8rem 1.2rem;border-radius:12px;cursor:pointer;
      transition:all .3s ease;
      font-weight:600;font-size:.95rem;
      letter-spacing:0.3px;
      position:relative;
    }
    .control-btn::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, #3b82f6, #06b6d4);
      border-radius: 2px;
      transition: width 0.3s ease;
    }
    .control-btn:hover,.control-btn.active{
      color:#ffffff;
      background: rgba(59, 130, 246, 0.2);
      border-color: rgba(59, 130, 246, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
    }
    .control-btn:hover::before,.control-btn.active::before {
      width: 100%;
    }

    /* -------------- Basketball court and players -------------- */
    .basketball-court{
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      border-radius:20px;padding:2rem;margin:2rem 0;
      position:relative;overflow:hidden;
      box-shadow:0 12px 32px rgba(0,0,0,.6), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
    }
    .basketball-court::before{
      content:"";
      position:absolute;top:0;left:0;right:0;bottom:0;
      background:radial-gradient(circle at 50% 10%,rgba(59, 130, 246,.2) 0%,transparent 30%),
                  radial-gradient(circle at 50% 90%,rgba(59, 130, 246,.2) 0%,transparent 30%);
      pointer-events:none;
    }
    .position-group{
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-radius:16px;
      padding:1.8rem;margin-bottom:1.5rem;
      box-shadow:0 8px 25px rgba(0,0,0,.3), 0 0 0 1px rgba(59, 130, 246, 0.1);
      transition:all .3s ease;position:relative;
      border-top: 2px solid rgba(59, 130, 246, 0.3);
    }
    .position-group:hover{
      transform:translateY(-3px);
      box-shadow:0 12px 35px rgba(0,0,0,.4), 0 0 0 1px rgba(59, 130, 246, 0.3);
      border-top-color: #3b82f6;
    }
    .position-header{
      display:flex;align-items:center;justify-content:space-between;
      margin-bottom:1rem;padding-bottom:.8rem;
      border-bottom:2px solid rgba(59, 130, 246, 0.2);
    }
    .position-title{
      font-size:1.5rem;font-weight:900;color:#ffffff;
      font-family:Georgia,serif;display:flex;align-items:center;gap:.8rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    .position-icon{
      width:36px;height:36px;
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 50%, #1e40af 100%);
      color:#fff;border-radius:12px;display:flex;align-items:center;justify-content:center;
      font-size:.9rem;font-weight:700;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }
    .depth-count{
      background: rgba(148, 163, 184, 0.2);color:#94a3b8;
      padding:.4rem .8rem;border-radius:12px;font-size:.85rem;font-weight:600;
      border: 1px solid rgba(148, 163, 184, 0.2);
    }
    .players-container{display:flex;flex-wrap:wrap;gap:.8rem;align-items:center;}
    .player-card{
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      color:#e2e8f0;padding:.8rem 1.2rem;border-radius:12px;font-weight:600;font-size:1rem;
      box-shadow:0 4px 12px rgba(0,0,0,.3), 0 0 0 1px rgba(255, 255, 255, 0.1);
      transition:all .3s ease;cursor:pointer;overflow:hidden;position:relative;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .player-card::before{
      content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(59, 130, 246,.3),transparent);
      transition:left .5s;
    }
    .player-card:hover::before{left:100%;}
    .player-card:hover{
      transform:translateY(-3px) scale(1.05);
      box-shadow:0 8px 25px rgba(59, 130, 246,.4);
      color:#ffffff;
      border-color: rgba(59, 130, 246, 0.4);
    }
    .player-card.starter{
      background: linear-gradient(135deg, #059669 0%, #10b981 100%);
      color:#ffffff;
      border:2px solid rgba(16, 185, 129, 0.5);font-size:1.1rem;padding:1rem 1.4rem;
      box-shadow:0 6px 20px rgba(16, 185, 129,.3);
    }
    .player-card.starter:hover{
      box-shadow:0 10px 30px rgba(16, 185, 129,.5);
    }
    .player-card.twoway{
      background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
      color:#ffffff;position:relative;
      box-shadow:0 4px 12px rgba(220, 38, 38,.3);
    }
    .player-card.twoway:hover{
      box-shadow:0 8px 25px rgba(220, 38, 38,.5);
    }
    .player-card.twoway::after{
      content:"2‑WAY";position:absolute;top:-8px;right:-8px;
      background:#ffffff;color:#dc2626;font-size:.65rem;padding:.3rem .5rem;border-radius:8px;
      font-weight:700;box-shadow:0 2px 6px rgba(0,0,0,.2);z-index:10;white-space:nowrap;
    }
    .depth-separator{color:#64748b;font-size:1.2rem;font-weight:300;margin:0 .5rem;}

    /* -------------- Notes section -------------- */
    .notes-section{
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      border-radius:16px;padding:2rem;margin-top:2rem;
      box-shadow:0 8px 25px rgba(0,0,0,.3), 0 0 0 1px rgba(59, 130, 246, 0.1);
      border-top: 2px solid rgba(59, 130, 246, 0.3);
    }
    .notes-title{
      font-size:1.5rem;color:#ffffff;font-weight:900;margin-bottom:1.2rem;
      font-family:Georgia,serif;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    .notes-list{list-style:none;padding:0;}
    .notes-list li{
      padding:.8rem 0;border-bottom:1px solid rgba(59, 130, 246, 0.2);
      display:flex;align-items:center;gap:1rem;
      color:#e2e8f0;
    }
    .notes-list li:last-child{border-bottom:none;}
    .note-icon{
      width:24px;height:24px;border-radius:8px;display:flex;align-items:center;justify-content:center;
      font-size:.8rem;font-weight:700;color:#fff;
      box-shadow: 0 2px 6px rgba(0,0,0,.2);
    }
    .note-icon.roster{background: linear-gradient(135deg, #059669, #10b981);}
    .note-icon.twoway{background: linear-gradient(135deg, #dc2626, #ef4444);}
    .note-icon.info{background: linear-gradient(135deg, #0ea5e9, #06b6d4);}

    /* -------------- Export button & modal -------------- */
    .export-container{text-align:center;margin-bottom:2rem;}
    .export-btn{
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 50%, #1e40af 100%);
      color:#fff;border:none;padding:1rem 2rem;border-radius:12px;
      font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .3s ease;
      box-shadow:0 6px 20px rgba(59, 130, 246,.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
      letter-spacing:0.3px;
    }
    .export-btn:hover{
      transform:translateY(-3px);
      box-shadow:0 10px 30px rgba(59, 130, 246,.6);
    }
    .export-btn:disabled{opacity:.7;cursor:not-allowed;transform:none;}

    .export-modal{
      display:none;position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,.9);z-index:2000;justify-content:center;align-items:center;
    }
    .export-modal-content{
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-radius:20px;padding:2.5rem;max-width:600px;width:90%;max-height:80vh;overflow-y:auto;
      text-align:center;position:relative;
      box-shadow:0 20px 40px rgba(0,0,0,.6), 0 0 0 1px rgba(59, 130, 246, 0.2);
      border-top: 3px solid #3b82f6;
    }
    .export-preview{
      max-width:100%;height:auto;border-radius:12px;
      box-shadow:0 8px 25px rgba(0,0,0,.4);margin-bottom:1.5rem;
    }
    .export-actions{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;}
    .copy-btn,.download-btn,.close-btn{
      padding:.8rem 1.5rem;border:none;border-radius:10px;font-weight:600;cursor:pointer;
      transition:all .3s ease;font-size:.95rem;
    }
    .copy-btn{
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);color:#fff;
      box-shadow:0 4px 12px rgba(59, 130, 246,.3);
    }
    .download-btn{
      background: linear-gradient(135deg, #059669, #10b981);color:#fff;
      box-shadow:0 4px 12px rgba(16, 185, 129,.3);
    }
    .close-btn{
      background: linear-gradient(135deg, #64748b, #475569);color:#fff;
      box-shadow:0 4px 12px rgba(100, 116, 139,.3);
    }
    .copy-btn:hover,.download-btn:hover,.close-btn:hover{
      transform:translateY(-2px);
    }

    /* -------------- Back‑home button -------------- */
    .back-home{margin:3rem 0 0;text-align:center;}
    .back-home-btn{
      display:inline-block;
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      color:#e2e8f0;padding:1rem 2.5rem;border-radius:12px;font-size:1.1rem;font-weight:600;
      text-decoration:none;
      box-shadow:0 6px 20px rgba(30, 41, 59,.3), 0 0 0 1px rgba(59, 130, 246, 0.2);
      transition:all .3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .back-home-btn:hover{
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      color:#ffffff;
      transform:translateY(-2px);
      box-shadow:0 8px 25px rgba(59, 130, 246,.4);
    }

    /* -------------- Responsive tweaks -------------- */
    @media(max-width:1400px){ .content-wrapper{padding:0 20px;} }
    @media(max-width:950px){
      .depth-main-content{padding:1.5rem;}
      .depth-logo{width:150px;height:150px;}
      .depth-title{font-size:2.2rem;}
    }
    @media(max-width:900px){
      .depth-main-content{padding:1.2rem;margin:1rem;}
      .depth-logo{width:120px;height:120px;}
      .basketball-court{padding:1rem;}
      .players-container{justify-content:center;}
      .player-card{font-size:.9rem;padding:.6rem .8rem;}
    }
    @media(max-width:600px){
      .depth-controls{gap:.5rem;}
      .control-btn{font-size:.8rem;padding:.6rem 1rem;}
      .depth-hero{padding:3rem 0 1.5rem;}
      .depth-title{font-size:1.8rem;}
    }
  </style>
</head>

<body>
  <!-- Navbar is injected by nav.js -->
  <script src="nav.js"></script>

  <div class="content-wrapper">
    <!-- ================= Banner ================= -->
    <header class="depth-hero">
      <div class="depth-hero-content">
        <img src="joelembiiddepth.png" alt="Sixers Depth Chart" class="depth-logo"/>
        <h1 class="depth-title">Sixers Depth Chart</h1>
        <p class="depth-subtitle">Elite Basketball Intel</p>
      </div>
    </header>

    <!-- ================= Main content ================= -->
    <main class="depth-main-content">

      <!-- Export button -->
      <div class="export-container">
        <button class="export-btn" id="exportBtn">📸 Export for Social Media</button>
      </div>

      <!-- Controls -->
      <div class="depth-controls">
        <button class="control-btn active" data-view="all">All Players</button>
        <button class="control-btn" data-view="starters">Starters Only</button>
        <button class="control-btn" data-view="bench">Bench Players</button>
        <button class="control-btn" data-view="twoway">Two‑Way Contracts</button>
      </div>

      <!-- Basketball court -->
      <div class="basketball-court">
        <!-- POINT GUARD -->
        <div class="position-group" data-position="pg">
          <div class="position-header">
            <div class="position-title"><div class="position-icon">PG</div>Point Guard</div>
            <div class="depth-count">4 players</div>
          </div>
          <div class="players-container">
            <div class="player-card starter" data-player="maxey" data-type="starter">Maxey</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="mccain" data-type="bench">McCain</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="lowry" data-type="bench">Lowry</div>
            <div class="depth-separator">|</div>
            <div class="player-card twoway" data-player="sallis" data-type="twoway">Sallis</div>
          </div>
        </div>
        <!-- SHOOTING GUARD -->
        <div class="position-group" data-position="sg">
          <div class="position-header">
            <div class="position-title"><div class="position-icon">SG</div>Shooting Guard</div>
            <div class="depth-count">3 players</div>
          </div>
          <div class="players-container">
            <div class="player-card starter" data-player="grimes" data-type="starter">Grimes</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="edgecombe" data-type="bench">Edgecombe</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="gordon" data-type="bench">Gordon</div>
          </div>
        </div>
        <!-- SMALL FORWARD -->
        <div class="position-group" data-position="sf">
          <div class="position-header">
            <div class="position-title"><div class="position-icon">SF</div>Small Forward</div>
            <div class="depth-count">3 players</div>
          </div>
          <div class="players-container">
            <div class="player-card starter" data-player="george" data-type="starter">George</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="oubre" data-type="bench">Oubre</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="edwards" data-type="bench">Edwards</div>
          </div>
        </div>
        <!-- POWER FORWARD -->
        <div class="position-group" data-position="pf">
          <div class="position-header">
            <div class="position-title"><div class="position-icon">PF</div>Power Forward</div>
            <div class="depth-count">4 players</div>
          </div>
          <div class="players-container">
            <div class="player-card starter" data-player="watford" data-type="starter">Watford</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="broome" data-type="bench">Broome</div>
            <div class="depth-separator">|</div>
            <div class="player-card twoway" data-player="walker" data-type="twoway">Walker</div>
            <div class="depth-separator">|</div>
            <div class="player-card twoway" data-player="barlow" data-type="twoway">Barlow</div>
          </div>
        </div>
        <!-- CENTER -->
        <div class="position-group" data-position="c">
          <div class="position-header">
            <div class="position-title"><div class="position-icon">C</div>Center</div>
            <div class="depth-count">3 players</div>
          </div>
          <div class="players-container">
            <div class="player-card starter" data-player="embiid" data-type="starter">Embied</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="bona" data-type="bench">Bona</div>
            <div class="depth-separator">|</div>
            <div class="player-card" data-player="drummond" data-type="bench">Drummond</div>
          </div>
        </div>
      </div> <!-- .basketball-court -->

      <!-- Notes section -->
      <div class="notes-section">
        <h3 class="notes-title">Depth Chart Key & Notes</h3>
        <ul class="notes-list">
          <li><div class="note-icon roster">✓</div><span><strong>Green Cards:</strong> Starting lineup players</span></li>
          <li><div class="note-icon">🔵</div><span><strong>Blue Cards:</strong> Regular roster players</span></li>
          <li><div class="note-icon twoway">2</div><span><strong>Red Cards:</strong> Two‑Way contract players</span></li>
          <li><div class="note-icon info">ℹ</div><span>Depth chart reflects based on performance, injuries, and coaching decisions.</span></li>
          <li><div class="note-icon info">⚡</div><span>The backcourt chemistry between Maxey and McCain will be crucial for the team's defensive success.</span></li>
        </ul>
      </div>

      <!-- Back to home -->
      <div class="back-home">
        <a href="/home" class="back-home-btn">← Back to Home</a>
      </div>
    </main>
  </div> <!-- .content-wrapper -->

  <!-- Export modal (hidden by default) -->
  <div id="exportModal" class="export-modal">
    <div class="export-modal-content">
      <h2 style="color:#ffffff;margin-bottom:1rem;text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);">Export Depth Chart</h2>
      <p style="color:#94a3b8;margin-bottom:1.5rem;">Your depth chart is ready for social media sharing!</p>
      <canvas id="exportCanvas" style="display:none;"></canvas>
      <img id="exportPreview" class="export-preview" alt="Depth chart export preview">
      <div class="export-actions">
        <button id="copyBtn" class="copy-btn">📋 Copy to Clipboard</button>
        <button id="downloadBtn" class="download-btn">📥 Download Image</button>
        <button id="closeModal" class="close-btn">✕ Close</button>
      </div>
    </div>
  </div>

  <div class="player-modal" id="playerModal">
    <div class="modal-content">
      <button class="modal-close" onclick="closePlayerModal()">&times;</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      /* Controls */
      const controlBtns = document.querySelectorAll('.control-btn');
      const playerCards = document.querySelectorAll('.player-card');
      const positionGroups = document.querySelectorAll('.position-group');

      controlBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          controlBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          filterPlayers(btn.dataset.view);
        });
      });

      function filterPlayers(view) {
        playerCards.forEach(card => {
          const type = card.dataset.type;
          let show = false;
          switch(view){
            case 'all':      show = true; break;
            case 'starters': show = type === 'starter'; break;
            case 'bench':    show = type === 'bench'; break;
            case 'twoway':   show = type === 'twoway'; break;
          }
          card.style.opacity = show ? '1' : '0.3';
        });
        updateDepthCounts(view);
      }

      function updateDepthCounts(view){
        positionGroups.forEach(group => {
          const cards = Array.from(group.querySelectorAll('.player-card'));
          const count = cards.filter(c => {
            const type = c.dataset.type;
            switch(view){
              case 'all':      return true;
              case 'starters': return type==='starter';
              case 'bench':    return type==='bench';
              case 'twoway':   return type==='twoway';
            }
          }).length;
          group.querySelector('.depth-count').textContent = `${count} player${count!==1?'s':''}`;
        });
      }

      /* Export modal logic */
      const exportBtn    = document.getElementById('exportBtn');
      const exportModal  = document.getElementById('exportModal');
      const exportCanvas = document.getElementById('exportCanvas');
      const exportPreview= document.getElementById('exportPreview');
      const copyBtn      = document.getElementById('copyBtn');
      const downloadBtn  = document.getElementById('downloadBtn');
      const closeModal   = document.getElementById('closeModal');

      exportBtn.addEventListener('click', async () => {
        exportBtn.disabled = true;
        exportBtn.textContent = '📸 Generating…';
        try{
          const html2canvas = await import('https://cdn.skypack.dev/html2canvas');
          const courtEl = document.querySelector('.basketball-court');
          const canvas = await html2canvas.default(courtEl, {
            backgroundColor:'#0f172a', scale:2, useCORS:true, allowTaint:true
          });

          const footerHeight = 120;
          const finalCanvas = document.createElement('canvas');
          finalCanvas.width  = canvas.width;
          finalCanvas.height = canvas.height + footerHeight;
          const ctx = finalCanvas.getContext('2d');

          // Dark background to match theme
          ctx.fillStyle = '#0f172a';
          ctx.fillRect(0,0,finalCanvas.width,finalCanvas.height);
          ctx.strokeStyle = '#3b82f6';
          ctx.lineWidth = 4;
          ctx.strokeRect(20,20,finalCanvas.width-40,finalCanvas.height-40);

          ctx.drawImage(canvas,20,20);

          const y = finalCanvas.height - 60;
          ctx.fillStyle = '#ffffff';
          ctx.font = 'bold 28px Georgia,serif';
          ctx.textAlign = 'center';
          ctx.fillText('SixersHoops.com', finalCanvas.width/2, y);

          ctx.fillStyle = '#3b82f6';
          ctx.font = '18px Arial,sans-serif';
          ctx.fillText('Philadelphia 76ers Depth Chart', finalCanvas.width/2, y+30);

          ctx.strokeStyle = '#3b82f6';
          ctx.lineWidth = 3;
          ctx.beginPath();
          ctx.moveTo(finalCanvas.width/2-150, y-20);
          ctx.lineTo(finalCanvas.width/2+150, y-20);
          ctx.stroke();

          exportModal.style.display = 'flex';
          exportPreview.src = finalCanvas.toDataURL('image/png');

          exportCanvas.width  = finalCanvas.width;
          exportCanvas.height = finalCanvas.height;
          exportCanvas.getContext('2d').drawImage(finalCanvas,0,0);
        }catch(err){
          console.error(err);
          alert('Export failed – please try again.');
        }finally{
          exportBtn.disabled = false;
          exportBtn.textContent = '📸 Export for Social Media';
        }
      });

      copyBtn.addEventListener('click', async () => {
        exportCanvas.toBlob(async blob=>{
          await navigator.clipboard.write([new ClipboardItem({ 'image/png': blob })]);
          copyBtn.textContent = '✅ Copied!';
          setTimeout(()=>copyBtn.textContent='📋 Copy to Clipboard',2000);
        });
      });

      downloadBtn.addEventListener('click', () => {
        const a = document.createElement('a');
        a.download = 'sixers-depth-chart.png';
        a.href = exportCanvas.toDataURL('image/png');
        a.click();
      });

      closeModal.addEventListener('click',()=>exportModal.style.display='none');
      exportModal.addEventListener('click',e=>{ if(e.target===exportModal) exportModal.style.display='none';});
      document.addEventListener('keydown',e=>{ if(e.key==='Escape' && exportModal.style.display==='flex') exportModal.style.display='none';});
    });

    function closePlayerModal(){ document.getElementById('playerModal').style.display='none'; }
    window.addEventListener('click',e=>{
      const m = document.getElementById('playerModal');
      if(e.target===m) m.style.display='none';
    });
  </script>
</body>
</html>
